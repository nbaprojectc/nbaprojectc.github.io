(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,t,a){e.exports=a(347)},186:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(7),o=a.n(s),c=a(17),i=a(18),l=a(24),u=a(22),h=a(25),p=a(177),d=a(58),m=(a(186),a(356)),f=a(350),y=a(355),v=a(28),w=a(351),b=a(59),g=a(9),k=a(352),x=a(354),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,newTeamName:null},a.handleOk=function(){a.props.updateName(a.state.newTeamName),a.setState({visible:!1,newTeamName:null})},a.handleCancel=function(){a.setState({visible:!1})},a.handleInput=function(e){new RegExp(/^[\w\d\ ]+$/g).test(e.target.value)&&a.setState({newTeamName:e.target.value})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(w.a.Title,{style:{textAlign:"center"}},this.props.teamName,r.a.createElement(b.a,{placement:"top",title:"Edit team name"},r.a.createElement(g.a,{className:"editIcon",style:{marginLeft:"5px",fontSize:"14px"},type:"edit",onClick:function(){return e.showModal()}}))),r.a.createElement(k.a,{title:"Edit team name",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(x.a,{autoFocus:!0,size:"large",placeholder:this.props.teamName,onChange:this.handleInput,onKeyPress:function(t){13===t.charCode&&e.handleOk()},value:this.state.newTeamName})))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a.Search,{style:{width:"200px",marginBottom:"10px"},value:this.props.search,onChange:this.props.handleSearch})}}]),t}(n.Component),T=a(349),E=a(42),S=a(348),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){a.setState({visible:!1})},a.renderStats=function(){var e=[],t=0;for(var n in a.props.player)e.push(r.a.createElement("p",{key:t++,style:{margin:"0px"}},r.a.createElement("b",null,n,": "),a.props.player[n]));return e},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(S.a,{title:"",visible:!1},r.a.createElement("a",{onClick:this.showModal,href:"/",style:{textDecoration:"none"}},"Expand")),r.a.createElement(k.a,{title:"Player statistics",okText:"Close",onOk:this.handleOk,onCancel:this.handleOk,visible:this.state.visible,cancelButtonProps:{style:{display:"none"}},destroyOnClose:!0},this.renderStats()))}}]),t}(n.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t={selectedRowKeys:this.props.selectedRowKeys,onChange:function(t,a){e.props.onSelect(t,a)},getCheckboxProps:function(t){return{disabled:e.props.selectedRowKeys.length>=15&&-1===E.indexOf(e.props.selectedRows,t)}}};return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(j,{handleSearch:this.props.handleSearch,search:this.props.search}),r.a.createElement(T.a,{bordered:!0,rowSelection:t,columns:[{title:"Name",dataIndex:"Player",sorter:function(e,t){var a=e.Player.toLowerCase(),n=t.Player.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Team",dataIndex:"Tm",sorter:function(e,t){var a=e.Tm.toLowerCase(),n=t.Tm.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Position",dataIndex:"Pos",sorter:function(e,t){var a=e.Pos.toLowerCase(),n=t.Pos.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Age",dataIndex:"Age",sorter:function(e,t){return e.Age-t.Age},sortDirections:["ascend","descend"]},{title:"Points",dataIndex:"PTS",sorter:function(e,t){return e.PTS-t.PTS},sortDirections:["ascend","descend"]},{title:"",key:"operation",fixed:"right",width:100,render:function(e){return r.a.createElement(C,{player:e})}}],dataSource:this.props.data,loading:this.props.loading,pagination:{pageSize:15,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},current:this.props.page,onChange:this.props.pageChange},rowKey:"key"}))}}]),t}(n.Component),R=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{title:"Remove player from team?",okText:"Yes",cancelText:"No",onConfirm:function(){return e.props.handleRemove(e.props.player)}},r.a.createElement("a",{href:"/"},"Remove"))}}]),t}(n.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(T.a,{columns:[{title:"Name",dataIndex:"Player",sorter:function(e,t){var a=e.Player.toLowerCase(),n=t.Player.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Team",dataIndex:"Tm",sorter:function(e,t){var a=e.Tm.toLowerCase(),n=t.Tm.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Position",dataIndex:"Pos",sorter:function(e,t){var a=e.Pos.toLowerCase(),n=t.Pos.toLowerCase();return a<n?-1:a>n?1:0},sortDirections:["ascend","descend"]},{title:"Age",dataIndex:"Age",sorter:function(e,t){return e.Age-t.Age},sortDirections:["ascend","descend"]},{title:"Points",dataIndex:"PTS",sorter:function(e,t){return e.PTS-t.PTS},sortDirections:["ascend","descend"]},{title:"",key:"expand",fixed:"right",width:100,render:function(e){return r.a.createElement(C,{player:e})}},{title:"",key:"operation",fixed:"right",width:100,render:function(t){return r.a.createElement(R,{player:t,handleRemove:e.props.handleRemove})}}],pagination:{pageSize:15,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}},dataSource:this.props.selectedRows})}}]),t}(n.Component),N=a(173),D=a.n(N),I=a(353),L=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,{style:{float:"left",paddingBottom:"5px"},valueStyle:{marginTop:-10,textAlign:"left"},title:"Players selected",value:this.props.length,suffix:"/ 15"})}}]),t}(n.Component),F=a(179),K=a(19),B=a.n(K),M=a(32),z="https://nbaprojectcbackendproduction.azurewebsites.net/api",J=function(){function e(t){var a=this;for(var n in Object(c.a)(this,e),this.serialize=function(){return{playerId:a.key,firstName:a.Player.split(" ")[0],lastName:a.Player.split(" ")[1],stats:{W_PCT:a.W_PCT,MIN:a.MIN,FGA:a.FGA,FGA3:a.FGA3,FTA:a.FTA,OREB:a.OREB,DREB:a.DREB,AST:a.AST,TOV:a.TOV,STL:a.STL,BLK:a.BLK,PF:a.PF,PTS:a.PTS}}},t)this[n]=t[n]}return Object(i.a)(e,null,[{key:"getAll",value:function(){var t=Object(M.a)(B.a.mark(function t(){var a;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(z,"/Players"));case 2:return t.next=4,t.sent.json();case 4:return a=t.sent.players,t.abrupt("return",a.map(function(t){return new e(e.RichardToEmilio(t))}));case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"getAllForTeam",value:function(){var t=Object(M.a)(B.a.mark(function t(a){var n;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(z,"/TeamPlayers/").concat(a));case 3:return t.next=5,t.sent.json();case 5:return n=t.sent.players,t.abrupt("return",n.map(function(t){return new e(e.RichardToEmilio(t))}));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",[]);case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(M.a)(B.a.mark(function t(a){var n;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(z,"/Players/").concat(a));case 2:return t.next=4,t.sent.json();case 4:return n=t.sent.players[0],t.abrupt("return",new e(e.RichardToEmilio(n)));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"RichardToEmilio",value:function(e){var t={Player:"".concat(e.firstName," ").concat(e.lastName),key:e.playerId};for(var a in e.stats)t[a]=e.stats[a];return t}}]),e}(),G=function(){function e(t){if(Object(c.a)(this,e),this.rows=[],this.keys=[],this.serverRows=[],this.serverTeamName=void 0,"object"===typeof t){for(var a in t)this[a]=t[a];"string"===typeof t.name&&(this.serverTeamName=t.name)}}return Object(i.a)(e,[{key:"loadPlayers",value:function(){var e=Object(M.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getAllForTeam(this.id);case 2:this.rows=e.sent,this.serverRows=E.clone(this.rows),this.keys=this.rows.map(function(e){return e.key});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(M.a)(B.a.mark(function e(){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/Teams/").concat(this.id),{method:"DELETE"});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(M.a)(B.a.mark(function e(){var t,a,n,r,s,o,c,i,l,u,h=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("number"===typeof this.id){e.next=12;break}return e.next=3,fetch("".concat(z,"/Teams"),{method:"POST",body:JSON.stringify({teamName:this.name}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:if(201===(t=e.sent).status){e.next=6;break}throw new Error("Failed to create new team");case 6:return e.next=8,t.json();case 8:for(n in a=e.sent)this[n]=a[n];e.next=18;break;case 12:if(this.name===this.serverTeamName){e.next=18;break}return e.next=15,fetch("".concat(z,"/Teams/").concat(this.id),{method:"PATCH",body:JSON.stringify({teamName:this.name}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 15:if(200===e.sent.status){e.next=18;break}throw new Error("Failed to update team");case 18:if(this.serverTeamName=this.name,!((r=E.differenceBy(this.rows,this.serverRows,function(e){return e.key}).map(function(e){return Object(F.a)({},e.serialize(),{teamId:h.id})})).length>0)){e.next=26;break}return e.next=23,fetch("".concat(z,"/TeamPlayers/").concat(this.id),{method:"POST",body:JSON.stringify({players:r}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 23:if(201===e.sent.status){e.next=26;break}throw new Error("Failed to update team players.");case 26:s=!0,o=!1,c=void 0,e.prev=29,i=E.differenceBy(this.serverRows,this.rows,function(e){return e.key})[Symbol.iterator]();case 31:if(s=(l=i.next()).done){e.next=41;break}return u=l.value,e.next=35,fetch("".concat(z,"/TeamPlayers/").concat(this.id,"/").concat(u.key),{method:"DELETE"});case 35:if(200===e.sent.status){e.next=38;break}throw new Error("Failed to update team players.");case 38:s=!0,e.next=31;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e.catch(29),o=!0,c=e.t0;case 47:e.prev=47,e.prev=48,s||null==i.return||i.return();case 50:if(e.prev=50,!o){e.next=53;break}throw c;case 53:return e.finish(50);case 54:return e.finish(47);case 55:this.serverRows=E.clone(this.rows);case 56:case"end":return e.stop()}},e,this,[[29,43,47,55],[48,,50,54]])}));return function(){return e.apply(this,arguments)}}()}],[{key:"getAll",value:function(){var t=Object(M.a)(B.a.mark(function t(){var a;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(z,"/Teams"));case 2:return t.next=4,t.sent.json();case 4:return a=t.sent.teams,t.abrupt("return",a.map(function(t){return new e(t)}));case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(M.a)(B.a.mark(function t(a){var n;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(z,"/Teams/").concat(a));case 2:return t.next=4,t.sent.json();case 4:return n=t.sent.teams[0],t.abrupt("return",new e(n));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"getWithPlayers",value:function(){var t=Object(M.a)(B.a.mark(function t(a){var n;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(a);case 2:return n=t.sent,t.next=5,n.loadPlayers();case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).team=null,a.loadTeam=function(){G.getWithPlayers(a.state._id).then(function(e){a.team=e,a.setState({selectedRowKeys:e.keys,name:e.name,selectedRows:e.rows})})},a.getData=function(){J.getAll().then(function(e){return a.setState({data:e})}).then(function(){a.setState({fuse:new D.a(a.state.data,{keys:["Player"]}),loading:!1})})},a.predict=function(){fetch("/api/predict",{method:"POST",body:JSON.stringify(a.state.selectedRows),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log(e)})},a.save=function(){a.setState({saving:!0}),a.team.name=a.state.name,a.team.rows=a.state.selectedRows,a.team.keys=a.state.selectedRowKeys,a.team.save().then(function(){a.props.history.push("/team/".concat(a.team.id)),a.setState({saving:!1})}).catch(function(e){a.setState({saving:!1}),m.a.error("Error: ".concat(e.message))})},a.handleSearch=function(e){""===e.target.value?a.setState({data:a.state.fuse.list,search:""}):a.setState({data:a.state.fuse.search(e.target.value),page:1,search:e.target.value})},a.onSelect=function(e,t){a.setState({selectedRowKeys:e,selectedRows:t})},a.onTabChange=function(){a.handleSearch({target:{value:""}})},a.handleRemove=function(e){a.setState({selectedRowKeys:E.without(a.state.selectedRowKeys,e.key),selectedRows:E.without(a.state.selectedRows,e)})},a.updateName=function(e){a.setState({name:e})},a.pageChange=function(e){a.setState({page:e})},a.state={_id:a.props.match.params.id||"",name:a.props.match.params.name||"",selectedRowKeys:[],selectedRows:[],data:[],fuse:null,loading:!0,search:"",page:1,saving:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getData(),this.loadTeam()}},{key:"componentDidUpdate",value:function(e,t){this.state.name===t.name&&this.state.selectedRowKeys===t.selectedRowKeys&&this.state.selectedRows===t.selectedRows||this.save()}},{key:"render",value:function(){var e=this,t=f.a.TabPane;return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{style:{textAlign:"left"},onBack:function(){e.props.history.push("/")},title:"Team Editor",subTitle:"create or modify an existing team"}),r.a.createElement(O,{updateName:this.updateName,teamName:this.state.name,loading:this.state.loading}),r.a.createElement(f.a,{defaultActiveKey:"1",onChange:this.onTabChange},r.a.createElement(t,{tab:"Add Players",key:"1"},r.a.createElement(L,{length:this.state.selectedRowKeys.length}),r.a.createElement(P,{loading:this.state.loading,data:this.state.data,onSelect:this.onSelect,selectedRowKeys:this.state.selectedRowKeys,selectedRows:this.state.selectedRows,handleSearch:this.handleSearch,search:this.state.search,page:this.state.page,pageChange:this.pageChange})),r.a.createElement(t,{tab:"View Team",key:"2"},r.a.createElement(A,{selectedRows:this.state.selectedRows,handleRemove:this.handleRemove}),r.a.createElement(v.a,{disabled:this.state.selectedRows.length<3,type:"primary",onClick:this.predict,style:{margin:"10px"}},"Predict"))))}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",found:!1,id:null,teams:[],loading:!0},a.handleOk=Object(M.a)(B.a.mark(function e(){var t;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.state.name){e.next=4;break}m.a.error("Please enter a team name"),e.next=12;break;case 4:if(null==a.state.id){e.next=8;break}a.props.history.push("/team/".concat(a.state.id)),e.next=12;break;case 8:return t=new G({name:a.state.name}),e.next=11,t.save();case 11:a.props.history.push("/team/".concat(t.id));case 12:case"end":return e.stop()}},e)})),a.handleInput=function(e){(new RegExp(/^[\w\d\ ]+$/g).test(e.target.value)||""===e.target.value)&&(a.state.teams.find(function(t){if(t.name.toLowerCase()===e.target.value.toLowerCase())return a.setState({id:t.id}),!0})||a.setState({id:null}),a.setState({name:e.target.value}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;G.getAll().then(function(t){e.setState({teams:t,loading:!1})})}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},r.a.createElement(w.a.Title,null,"R.P.S."),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(x.a,{autoFocus:!0,placeholder:this.props.teamName,onChange:this.handleInput,style:{marginRight:"10px"},value:this.state.name}),null!=this.state.id?r.a.createElement(v.a,{onClick:this.handleOk,type:"primary"},"View Team"):r.a.createElement(v.a,{onClick:this.handleOk,disabled:this.state.loading,type:"primary"},"Create Team")))}}]),t}(n.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:W}),r.a.createElement(d.a,{path:"/create/:name",component:V}),r.a.createElement(d.a,{path:"/team/:id",component:V})))}}]),t}(n.Component);o.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.9a0efc81.chunk.js.map